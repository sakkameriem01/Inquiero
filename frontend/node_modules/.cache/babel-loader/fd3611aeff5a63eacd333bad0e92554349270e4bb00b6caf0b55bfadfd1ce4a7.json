{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{ToastContainer,toast,Slide}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{Document,Page,pdfjs}from'react-pdf';import{Plus,Trash2,FileText,Send,Moon,Sun,ChevronLeft,ChevronRight,X,FileUp,Clock,MessageSquare,Star,Edit,Menu,Eye}from'lucide-react';import'./styles/globals.css';import{Tooltip}from'react-tooltip';import'react-tooltip/dist/react-tooltip.css';// Configure react-pdf worker\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";pdfjs.GlobalWorkerOptions.workerSrc='/pdf.worker.min.js';const API_BASE_URL='http://localhost:8000';// Assuming FastAPI runs on port 8000\nfunction getToastIcon(type){switch(type){case'success':return'‚úÖ';case'error':return'‚ùå';case'info':return'‚ÑπÔ∏è';case'warning':return'‚ö†Ô∏è';default:return'üîî';}}function TypingBubble(){return/*#__PURE__*/_jsx(\"div\",{className:\"chat-bubble chat-bubble-ai typing-bubble\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"typing-dots\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})});}function PDFFileList(_ref){let{files,onAddMore,onPreview,onRemove,isSidebarOpen,showAddButton=true,onDragOver,onDrop}=_ref;if(files.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(FileText,{size:40,className:\"mx-auto mb-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400 text-sm mb-4\",children:\"No PDF files uploaded yet\"}),showAddButton&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:onAddMore,className:\"btn btn-secondary text-sm flex items-center gap-2 mx-auto\",children:[/*#__PURE__*/_jsx(FileUp,{size:16}),\" Upload PDF\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 hover:border-blue-400 dark:hover:border-blue-500 transition-colors duration-200\",onDragOver:onDragOver,onDrop:onDrop,children:[/*#__PURE__*/_jsx(FileUp,{size:24,className:\"mx-auto mb-2 text-gray-400\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:\"Or drag and drop PDF files here\"})]})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FileText,{size:20,className:\"text-accent-blue\"}),\"Uploaded Files (\",files.length,\")\"]}),showAddButton&&/*#__PURE__*/_jsxs(\"button\",{onClick:onAddMore,className:\"btn btn-secondary text-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FileUp,{size:16}),\" Add More\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-3 \".concat(isSidebarOpen?'md:grid-cols-1':'grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4'),children:files.map((file,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"group relative flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 transition-all duration-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 min-w-0 flex-1\",children:[/*#__PURE__*/_jsx(FileText,{size:20,className:\"text-accent-blue dark:text-accent-purple flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium truncate block\",children:file.name}),file.language&&file.language!=='en'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:file.language.toUpperCase()}),file.uploadedAt&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-400 dark:text-gray-500\",children:new Date(file.uploadedAt).toLocaleDateString()})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onPreview(file.path),className:\"btn-icon btn-icon-primary p-1.5\",\"data-tooltip-id\":\"preview-tooltip\",\"data-tooltip-content\":\"Preview PDF\",children:/*#__PURE__*/_jsx(Eye,{size:14})}),onRemove&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onRemove(file.path),className:\"btn-icon btn-icon-secondary p-1.5\",\"data-tooltip-id\":\"remove-tooltip\",\"data-tooltip-content\":\"Remove file\",children:/*#__PURE__*/_jsx(Trash2,{size:14})})]})]},file.path||idx))})]});}function ChatItem(_ref2){let{chat,isSelected,isFavorited,onSelect,onRename,onFavorite,onDelete,renamingChatId,newChatName,setNewChatName}=_ref2;const isRenaming=renamingChatId===chat.id;return/*#__PURE__*/_jsx(\"div\",{className:\"\\n        group relative flex flex-col transition-all duration-200\\n        \".concat(isSelected?'bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800':isFavorited?'bg-amber-50/50 dark:bg-amber-900/10 border-amber-200 dark:border-amber-800/50 hover:bg-amber-50 dark:hover:bg-amber-900/20':'bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50',\"\\n        border rounded-xl shadow-sm hover:shadow-md\\n        cursor-pointer select-none\\n        \").concat(isFavorited?'ring-1 ring-amber-200 dark:ring-amber-800/50':'',\"\\n      \"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3\",onClick:()=>onSelect(chat.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 min-w-0 flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-shrink-0 relative\",children:[isFavorited&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-1 -right-1\",children:/*#__PURE__*/_jsx(Star,{size:12,className:\"text-amber-400 fill-amber-400\"})}),/*#__PURE__*/_jsx(FileText,{size:18,className:\"\\n                \".concat(isSelected?'text-blue-600 dark:text-blue-400':isFavorited?'text-amber-600 dark:text-amber-400':'text-gray-400 dark:text-gray-500',\"\\n                transition-colors duration-200\\n              \")})]}),/*#__PURE__*/_jsx(\"div\",{className:\"min-w-0 flex-1\",children:isRenaming?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newChatName,onChange:e=>setNewChatName(e.target.value),onBlur:()=>onRename(chat.id,newChatName),onKeyPress:e=>{if(e.key==='Enter'){onRename(chat.id,newChatName);}},className:\"\\n                  w-full px-2 py-1 text-sm rounded-md \\n                  \".concat(isFavorited?'border-amber-200 dark:border-amber-800 focus:ring-amber-500':'border-blue-200 dark:border-blue-800 focus:ring-blue-500',\"\\n                  bg-white dark:bg-gray-800 focus:ring-2 focus:border-transparent\\n                  transition-all duration-200\\n                \"),autoFocus:true}):/*#__PURE__*/_jsx(\"p\",{className:\"\\n                text-sm font-medium truncate\\n                \".concat(isFavorited?'text-amber-700 dark:text-amber-300':'text-gray-700 dark:text-gray-200',\"\\n              \"),children:chat.name})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200\",children:[/*#__PURE__*/_jsx(\"button\",{\"data-tooltip-id\":\"rename-tooltip\",\"data-tooltip-content\":\"Rename chat\",onClick:e=>{e.stopPropagation();onRename(chat.id,chat.name);},className:\"\\n              p-1.5 rounded-lg transition-colors duration-200\\n              \".concat(isFavorited?'hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-600 dark:text-amber-400':'hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200',\"\\n            \"),children:/*#__PURE__*/_jsx(Edit,{size:14})}),/*#__PURE__*/_jsx(\"button\",{\"data-tooltip-id\":\"favorite-tooltip\",\"data-tooltip-content\":isFavorited?\"Remove from favorites\":\"Add to favorites\",onClick:e=>{e.stopPropagation();onFavorite(chat.id);},className:\"\\n              p-1.5 rounded-lg transition-colors duration-200\\n              \".concat(isFavorited?'hover:bg-amber-100 dark:hover:bg-amber-900/30':'hover:bg-gray-100 dark:hover:bg-gray-700',\"\\n            \"),children:/*#__PURE__*/_jsx(Star,{size:14,className:isFavorited?'text-amber-400 fill-amber-400':'text-gray-400 dark:text-gray-500 hover:text-amber-400 dark:hover:text-amber-400'})}),/*#__PURE__*/_jsx(\"button\",{\"data-tooltip-id\":\"delete-tooltip\",\"data-tooltip-content\":\"Delete chat\",onClick:e=>{e.stopPropagation();onDelete(chat.id);},className:\"\\n              p-1.5 rounded-lg transition-colors duration-200\\n              \".concat(isFavorited?'hover:bg-red-50 dark:hover:bg-red-900/30 text-amber-600/70 hover:text-red-500 dark:text-amber-400/70 dark:hover:text-red-400':'hover:bg-red-50 dark:hover:bg-red-900/30 text-gray-400 hover:text-red-500 dark:text-gray-500 dark:hover:text-red-400',\"\\n            \"),children:/*#__PURE__*/_jsx(Trash2,{size:14})})]})]})});}function App(){const[chats,setChats]=useState([]);const[currentChatId,setCurrentChatId]=useState(null);const[messages,setMessages]=useState([]);const[question,setQuestion]=useState('');const[loading,setLoading]=useState(false);const[showPdfModal,setShowPdfModal]=useState(false);const[pdfUrlToPreview,setPdfUrlToPreview]=useState(null);const[numPages,setNumPages]=useState(null);const[pageNumber,setPageNumber]=useState(1);const[isDarkMode,setIsDarkMode]=useState(false);const[showTyping,setShowTyping]=useState(false);const typingTimeoutRef=useRef(null);const messagesEndRef=useRef(null);const fileInputRef=useRef(null);const mainFileInputRef=useRef(null);const[uploadedFiles,setUploadedFiles]=useState([]);const[favoritedChats,setFavoritedChats]=useState(new Set());const[attachedPDFs,setAttachedPDFs]=useState([]);const[userLanguage,setUserLanguage]=useState('en');// Add a new state for the chat being renamed\nconst[renamingChatId,setRenamingChatId]=useState(null);const[newChatName,setNewChatName]=useState('');// Only show the upload button in the sidebar after the first file is uploaded\nconst[showSidebarUpload,setShowSidebarUpload]=useState(true);const[isSidebarOpen,setIsSidebarOpen]=useState(()=>{const saved=localStorage.getItem('sidebarOpen');return saved!==null?JSON.parse(saved):true;});// Load uploaded files from localStorage on component mount\nuseEffect(()=>{const savedFiles=localStorage.getItem('uploadedFiles');if(savedFiles){try{setUploadedFiles(JSON.parse(savedFiles));}catch(e){console.error('Error loading uploaded files:',e);setUploadedFiles([]);}}},[]);// Save uploaded files to localStorage whenever they change\nuseEffect(()=>{localStorage.setItem('uploadedFiles',JSON.stringify(uploadedFiles));},[uploadedFiles]);const onDocumentLoadSuccess=_ref3=>{let{numPages}=_ref3;setNumPages(numPages);setPageNumber(1);// Reset to first page when new PDF loads\n};const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};// Function to add a file to the uploaded files list\nconst addToUploadedFiles=fileData=>{const newFile={path:fileData.pdf_path,name:fileData.chat_name||fileData.filename,language:fileData.language||'en',uploadedAt:new Date().toISOString(),chatId:fileData.chat_id};setUploadedFiles(prev=>{// Check if file already exists (by path)\nconst exists=prev.some(f=>f.path===newFile.path);if(exists){return prev;}return[...prev,newFile];});};// Function to remove a file from the uploaded files list\nconst removeUploadedFile=filePath=>{setUploadedFiles(prev=>prev.filter(f=>f.path!==filePath));// Also remove from attached PDFs if it's there\nsetAttachedPDFs(prev=>prev.filter(f=>f.path!==filePath));};// Function to upload files to a specific chat\nconst uploadFilesToChat=async function(files){let targetChatId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(files.length===0)return;setLoading(true);toast.info(\"Uploading and processing PDFs...\");try{const uploadPromises=files.map(async file=>{const formData=new FormData();formData.append('file',file);// Add chat_id to form data if we're appending to an existing chat\nif(targetChatId){formData.append('chat_id',targetChatId);}const response=await fetch(\"\".concat(API_BASE_URL,\"/upload-pdf/\"),{method:'POST',body:formData});if(!response.ok){const errorData=await response.json();throw new Error(\"HTTP error! status: \".concat(response.status,\" - \").concat(errorData.detail||response.statusText));}const result=await response.json();// Add file to uploaded files list\naddToUploadedFiles(result);return result;});const results=await Promise.all(uploadPromises);// If we're appending to an existing chat, update the attached PDFs\nif(targetChatId&&currentChatId===targetChatId){setAttachedPDFs(prev=>[...prev,...results.map(file=>({path:file.pdf_path,name:file.chat_name,language:file.language}))]);}// Set the first chat as current if none is selected and we're not appending\nif(!currentChatId&&!targetChatId&&results.length>0){setCurrentChatId(results[0].chat_id);}fetchChats();const action=targetChatId?'appended to chat':'uploaded and processed';toast.success(\"\".concat(files.length,\" PDF\").concat(files.length>1?'s':'',\" \").concat(action,\" successfully! \\u2705\"));setShowSidebarUpload(true);}catch(e){toast.error(\"PDF upload failed: \".concat(e.message,\" \\u274C\"));}finally{setLoading(false);}};useEffect(()=>{fetchChats();},[]);useEffect(()=>{if(currentChatId){fetchChatMessages(currentChatId);}else{setMessages([]);}},[currentChatId]);useEffect(()=>{scrollToBottom();},[messages]);useEffect(()=>{// Check for saved theme preference\nconst savedTheme=localStorage.getItem('theme');if(savedTheme==='dark'){setIsDarkMode(true);document.documentElement.classList.add('dark');}},[]);useEffect(()=>{return()=>{if(typingTimeoutRef.current)clearTimeout(typingTimeoutRef.current);};},[]);const fetchChats=async()=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/chats/\"));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();if(data&&Array.isArray(data.chats)){setChats(data.chats);}else{setChats([]);console.warn('Received invalid chat data format:',data);}}catch(e){setChats([]);// Clear chats on error\n}};const fetchChatMessages=async chatId=>{setLoading(true);try{const response=await fetch(\"\".concat(API_BASE_URL,\"/chats/\").concat(chatId,\"/\"));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();if(data&&Array.isArray(data.messages)){setMessages(data.messages);// Load associated PDFs\nif(data.pdf_paths){setAttachedPDFs(data.pdf_paths.map((path,index)=>{var _data$pdf_names;return{path:path,name:((_data$pdf_names=data.pdf_names)===null||_data$pdf_names===void 0?void 0:_data$pdf_names[index])||path.split('/').pop(),language:data.language||'en'};}));}}else{setMessages([]);setAttachedPDFs([]);console.warn('Received invalid chat message data format:',data);}}catch(e){setMessages([]);// Clear messages on error\nsetAttachedPDFs([]);// Clear PDFs on error\ntoast.error(\"Failed to load chat: \".concat(e.message));}finally{setLoading(false);}};const handleFileUpload=async event=>{const files=Array.from(event.target.files);if(files.length===0)return;// If we have a current chat, append to it; otherwise create new chat\nawait uploadFilesToChat(files,currentChatId);};const handleDragOver=e=>{e.preventDefault();e.stopPropagation();};const handleDrop=e=>{e.preventDefault();e.stopPropagation();const files=Array.from(e.dataTransfer.files).filter(file=>file.type==='application/pdf');if(files.length>0){const event={target:{files}};handleFileUpload(event);}};const handleSendMessage=async e=>{e.preventDefault();if(!question.trim()||!currentChatId)return;// Detect user's language\ntry{const response=await fetch(\"\".concat(API_BASE_URL,\"/detect-language/\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({text:question})});if(response.ok){const data=await response.json();setUserLanguage(data.language);}}catch(e){console.error('Language detection failed:',e);}const userMessage={role:'user',content:question};setMessages(prevMessages=>[...prevMessages,userMessage]);setQuestion('');setLoading(true);setShowTyping(false);if(typingTimeoutRef.current)clearTimeout(typingTimeoutRef.current);typingTimeoutRef.current=setTimeout(()=>setShowTyping(true),300);try{const response=await fetch(\"\".concat(API_BASE_URL,\"/chat/\").concat(currentChatId,\"/message/\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({text:userMessage.content,sender:'user',language:userLanguage})});if(!response.ok){const errorData=await response.json();throw new Error(\"HTTP error! status: \".concat(response.status,\" - \").concat(errorData.detail||response.statusText));}const data=await response.json();setMessages(prevMessages=>[...prevMessages,{role:'assistant',content:data.response}]);fetchChats();toast.success(\"Answer generated! üí¨\");}catch(e){setMessages(prevMessages=>prevMessages.slice(0,prevMessages.length-1));// Remove user message if failed\ntoast.error(\"Failed to generate answer: \".concat(e.message,\" \\u26A0\\uFE0F\"));}finally{setLoading(false);setShowTyping(false);// Hide typing animation when response is complete\nif(typingTimeoutRef.current){clearTimeout(typingTimeoutRef.current);typingTimeoutRef.current=null;}}};const handleDeleteChat=async chatId=>{if(window.confirm(\"Are you sure you want to delete this chat? This action cannot be undone.\")){setLoading(true);try{const response=await fetch(\"\".concat(API_BASE_URL,\"/chats/\").concat(chatId,\"/\"),{method:'DELETE'});if(!response.ok){const errorData=await response.json();throw new Error(\"HTTP error! status: \".concat(response.status,\" - \").concat(errorData.detail||response.statusText));}if(currentChatId===chatId){setCurrentChatId(null);setMessages([]);setAttachedPDFs([]);}setChats(prevChats=>prevChats.filter(chat=>chat.id!==chatId));toast.success(\"Chat deleted successfully! üóëÔ∏è\");}catch(e){toast.error(\"Failed to delete chat: \".concat(e.message,\" \\u26A0\\uFE0F\"));}finally{setLoading(false);}}};const handleDeleteAllChats=async()=>{if(window.confirm(\"Are you sure you want to delete ALL chats? This action cannot be undone.\")){setLoading(true);try{console.log(\"Sending delete all chats request...\");const response=await fetch(\"\".concat(API_BASE_URL,\"/chats/all/\"),{method:'DELETE'});console.log(\"Delete all chats response status:\",response.status);if(!response.ok){const errorData=await response.json();console.error(\"Delete all chats error:\",errorData);throw new Error(\"HTTP error! status: \".concat(response.status,\" - \").concat(errorData.detail||response.statusText));}const result=await response.json();console.log(\"Delete all chats success:\",result);setCurrentChatId(null);setChats([]);setMessages([]);setAttachedPDFs([]);toast.success(\"All chats deleted! üóëÔ∏è\");// Refresh the chat list to ensure UI is updated\nawait fetchChats();}catch(e){console.error(\"Delete all chats failed:\",e);toast.error(\"Failed to delete all chats: \".concat(e.message,\" \\u26A0\\uFE0F\"));}finally{setLoading(false);}}};const handlePdfPreview=pdfPath=>{if(!pdfPath){toast.error(\"PDF path is not available.\");return;}const pdfUrl=\"\".concat(API_BASE_URL,\"/pdfs/\").concat(pdfPath);// Ensure the URL is correctly constructed\nsetPdfUrlToPreview(pdfUrl);setShowPdfModal(true);};const toggleDarkMode=()=>{setIsDarkMode(!isDarkMode);document.documentElement.classList.toggle('dark');};const toggleSidebar=()=>{setIsSidebarOpen(!isSidebarOpen);localStorage.setItem('sidebarOpen',JSON.stringify(!isSidebarOpen));};// Keyboard shortcut to toggle sidebar (Ctrl/Cmd + B)\nuseEffect(()=>{const handleKeyDown=event=>{if((event.ctrlKey||event.metaKey)&&event.key==='b'){event.preventDefault();toggleSidebar();}};document.addEventListener('keydown',handleKeyDown);return()=>document.removeEventListener('keydown',handleKeyDown);},[isSidebarOpen]);const toggleFavorite=chatId=>{setFavoritedChats(prev=>{const newFavorited=new Set(prev);if(newFavorited.has(chatId)){newFavorited.delete(chatId);}else{newFavorited.add(chatId);}return newFavorited;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-background-light dark:bg-background-dark text-text-primary-light dark:text-text-primary-dark transition-colors duration-200 \".concat(!isSidebarOpen?'sidebar-closed':''),children:[/*#__PURE__*/_jsx(ToastContainer,{position:\"bottom-right\",autoClose:3000,hideProgressBar:false,newestOnTop:true,closeOnClick:true,rtl:false,pauseOnFocusLoss:true,draggable:true,pauseOnHover:true,theme:isDarkMode?\"dark\":\"light\",limit:3,transition:Slide,icon:_ref4=>{let{type}=_ref4;return getToastIcon(type);}}),/*#__PURE__*/_jsxs(\"aside\",{className:\"\\n        sidebar w-80 p-6 flex flex-col shadow-lg z-40 \\n        bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700\\n        transition-all duration-300 ease-in-out\\n        \".concat(isSidebarOpen?'translate-x-0':'-translate-x-full',\"\\n        fixed md:fixed md:top-0 md:left-0 md:h-full\\n        \").concat(isSidebarOpen?'left-0':'-left-full md:left-0',\"\\n      \"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font-extrabold tracking-wide gradient-text\",children:\"Inquiero\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleSidebar,className:\"btn-icon btn-icon-primary hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200\",\"data-tooltip-id\":\"sidebar-tooltip\",\"data-tooltip-content\":\"\".concat(isSidebarOpen?\"Close sidebar\":\"Open sidebar\",\" (Ctrl+B)\"),children:/*#__PURE__*/_jsx(Menu,{size:20})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 mb-6\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary w-full flex items-center justify-center gap-2 hover:shadow-lg transition-all duration-200\",onClick:()=>{setCurrentChatId(null);setMessages([]);},\"data-tooltip-id\":\"new-chat-tooltip\",\"data-tooltip-content\":\"Start a new chat\",children:[/*#__PURE__*/_jsx(Plus,{size:20}),\" New Chat\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary w-full flex items-center justify-center gap-2 hover:shadow-lg transition-all duration-200\",onClick:handleDeleteAllChats,\"data-tooltip-id\":\"delete-all-tooltip\",\"data-tooltip-content\":\"Delete all chats\",children:[/*#__PURE__*/_jsx(Trash2,{size:20}),\" Delete All\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto pr-2 -mr-2 space-y-2\",children:chats.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(FileText,{size:40,className:\"mx-auto mb-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400 text-sm\",children:\"No chats yet. Upload a PDF to start!\"})]}):[...chats].sort((a,b)=>{// First sort by favorite status\nconst aFavorited=favoritedChats.has(a.id);const bFavorited=favoritedChats.has(b.id);if(aFavorited&&!bFavorited)return-1;if(!aFavorited&&bFavorited)return 1;// Then sort by creation date (newest first)\nconst aDate=new Date(a.created_at||0);const bDate=new Date(b.created_at||0);return bDate-aDate;}).map(chat=>/*#__PURE__*/_jsx(ChatItem,{chat:chat,isSelected:currentChatId===chat.id,isFavorited:favoritedChats.has(chat.id),onSelect:setCurrentChatId,onRename:(id,name)=>{setRenamingChatId(id);setNewChatName(name);},onFavorite:toggleFavorite,onDelete:handleDeleteChat,renamingChatId:renamingChatId,newChatName:newChatName,setNewChatName:setNewChatName},chat.id))}),showSidebarUpload&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"file-upload-btn w-full flex items-center justify-center gap-2 hover:shadow-lg transition-all duration-200\",onClick:()=>{if(fileInputRef.current){fileInputRef.current.click();}},\"data-tooltip-id\":\"upload-tooltip\",\"data-tooltip-content\":\"Upload PDF files\",children:[/*#__PURE__*/_jsx(FileUp,{size:20}),\" Upload PDF\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,accept:\".pdf\",multiple:true,onChange:handleFileUpload,className:\"hidden\"})]}),/*#__PURE__*/_jsx(Tooltip,{id:\"rename-tooltip\",place:\"top\"}),/*#__PURE__*/_jsx(Tooltip,{id:\"favorite-tooltip\",place:\"top\"}),/*#__PURE__*/_jsx(Tooltip,{id:\"delete-tooltip\",place:\"top\"}),/*#__PURE__*/_jsx(Tooltip,{id:\"sidebar-tooltip\",place:\"bottom\"}),/*#__PURE__*/_jsx(Tooltip,{id:\"new-chat-tooltip\",place:\"bottom\"}),/*#__PURE__*/_jsx(Tooltip,{id:\"delete-all-tooltip\",place:\"bottom\"}),/*#__PURE__*/_jsx(Tooltip,{id:\"upload-tooltip\",place:\"bottom\"}),/*#__PURE__*/_jsx(Tooltip,{id:\"theme-tooltip\",place:\"bottom\"}),/*#__PURE__*/_jsx(Tooltip,{id:\"preview-tooltip\",place:\"top\"}),/*#__PURE__*/_jsx(Tooltip,{id:\"remove-tooltip\",place:\"top\"})]}),isSidebarOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden\",onClick:toggleSidebar}),/*#__PURE__*/_jsxs(\"main\",{className:\"\\n        flex-1 flex flex-col transition-all duration-300 ease-in-out\\n        \".concat(isSidebarOpen?'md:ml-80':'ml-0',\"\\n        \").concat(isSidebarOpen?'md:w-auto':'w-full',\"\\n        \").concat(isSidebarOpen?'md:max-w-none':'max-w-full',\"\\n        \").concat(isSidebarOpen?'md:relative':'md:relative',\"\\n      \"),children:[!isSidebarOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-4 left-4 z-50\",children:/*#__PURE__*/_jsx(\"button\",{onClick:toggleSidebar,className:\"btn-icon btn-icon-primary hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 shadow-lg\",\"data-tooltip-id\":\"sidebar-tooltip\",\"data-tooltip-content\":\"Open sidebar (Ctrl+B)\",children:/*#__PURE__*/_jsx(Menu,{size:20})})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-4 right-4 z-50\",children:/*#__PURE__*/_jsx(\"button\",{onClick:toggleDarkMode,className:\"btn-icon btn-icon-primary hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 shadow-lg\",\"data-tooltip-id\":\"theme-tooltip\",\"data-tooltip-content\":isDarkMode?\"Switch to light mode\":\"Switch to dark mode\",children:isDarkMode?/*#__PURE__*/_jsx(Sun,{size:20}):/*#__PURE__*/_jsx(Moon,{size:20})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto space-y-4 transition-all duration-300 \".concat(isSidebarOpen?'md:max-w-none p-6':'max-w-full p-6 md:p-8 lg:p-12'),children:[currentChatId?messages.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4 transition-all duration-300 \".concat(isSidebarOpen?'md:max-w-4xl md:mx-auto':'w-full'),children:messages.map((message,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"chat-bubble \".concat(message.role==='user'?'chat-bubble-user':'chat-bubble-ai'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[message.role==='user'?/*#__PURE__*/_jsx(MessageSquare,{size:20,className:\"mr-2 text-accent-blue\"}):/*#__PURE__*/_jsx(Clock,{size:20,className:\"mr-2 text-accent-purple\"}),/*#__PURE__*/_jsx(\"div\",{children:message.content})]})},index))}):/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full text-text-secondary\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Start by asking a question about your PDF!\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Welcome to Inquiero! \\uD83D\\uDC4B\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-text-secondary mb-8\",children:\"Upload PDFs to start asking questions\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"transition-all duration-300 \".concat(isSidebarOpen?'md:max-w-4xl md:mx-auto':'w-full'),children:/*#__PURE__*/_jsx(PDFFileList,{files:uploadedFiles,onAddMore:()=>{if(mainFileInputRef.current){mainFileInputRef.current.click();}},onPreview:handlePdfPreview,onRemove:removeUploadedFile,isSidebarOpen:isSidebarOpen,showAddButton:true,onDragOver:handleDragOver,onDrop:handleDrop})})]}),showTyping&&/*#__PURE__*/_jsx(TypingBubble,{}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:mainFileInputRef,accept:\".pdf\",multiple:true,onChange:handleFileUpload,className:\"hidden\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSendMessage,className:\"border-t border-gray-200 dark:border-gray-700 transition-all duration-300 \".concat(isSidebarOpen?'md:max-w-none p-4':'max-w-full p-4 md:p-6 lg:p-8'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 transition-all duration-300 \".concat(isSidebarOpen?'md:max-w-4xl md:mx-auto':'w-full'),children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:question,onChange:e=>setQuestion(e.target.value),placeholder:\"Ask a question about your PDF...\",className:\"input-field flex-1\",disabled:loading||!currentChatId}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||!question.trim()||!currentChatId,className:\"btn btn-primary flex-shrink-0\",children:loading?/*#__PURE__*/_jsx(Clock,{size:20,className:\"animate-spin\"}):/*#__PURE__*/_jsx(Send,{size:20})})]})}),currentChatId&&attachedPDFs.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 dark:border-gray-700 transition-all duration-300 \".concat(isSidebarOpen?'md:max-w-none p-4':'max-w-full p-4 md:p-6 lg:p-8'),children:/*#__PURE__*/_jsx(\"div\",{className:\"transition-all duration-300 \".concat(isSidebarOpen?'md:max-w-4xl md:mx-auto':'w-full'),children:/*#__PURE__*/_jsx(PDFFileList,{files:attachedPDFs,onAddMore:()=>{if(mainFileInputRef.current){mainFileInputRef.current.click();}},onPreview:handlePdfPreview,onRemove:null// Don't allow removal from chat context\n,isSidebarOpen:isSidebarOpen,showAddButton:true,onDragOver:handleDragOver,onDrop:handleDrop})})})]}),showPdfModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-xl p-4 max-w-4xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold\",children:\"PDF Preview\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPdfModal(false),className:\"btn-icon btn-icon-secondary\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsx(Document,{file:pdfUrlToPreview,onLoadSuccess:onDocumentLoadSuccess,className:\"flex justify-center\",children:/*#__PURE__*/_jsx(Page,{pageNumber:pageNumber,renderTextLayer:false,renderAnnotationLayer:false,className:\"shadow-soft\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center mt-4 space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPageNumber(Math.max(1,pageNumber-1)),disabled:pageNumber<=1,className:\"btn btn-icon btn-icon-secondary\",children:/*#__PURE__*/_jsx(ChevronLeft,{size:20})}),/*#__PURE__*/_jsxs(\"span\",{className:\"py-2\",children:[\"Page \",pageNumber,\" of \",numPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPageNumber(Math.min(numPages,pageNumber+1)),disabled:pageNumber>=numPages,className:\"btn btn-icon btn-icon-secondary\",children:/*#__PURE__*/_jsx(ChevronRight,{size:20})})]})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","ToastContainer","toast","Slide","Document","Page","pdfjs","Plus","Trash2","FileText","Send","Moon","Sun","ChevronLeft","ChevronRight","X","FileUp","Clock","MessageSquare","Star","Edit","Menu","Eye","Tooltip","jsx","_jsx","jsxs","_jsxs","GlobalWorkerOptions","workerSrc","API_BASE_URL","getToastIcon","type","TypingBubble","className","children","PDFFileList","_ref","files","onAddMore","onPreview","onRemove","isSidebarOpen","showAddButton","onDragOver","onDrop","length","size","onClick","concat","map","file","idx","name","language","toUpperCase","uploadedAt","Date","toLocaleDateString","path","ChatItem","_ref2","chat","isSelected","isFavorited","onSelect","onRename","onFavorite","onDelete","renamingChatId","newChatName","setNewChatName","isRenaming","id","value","onChange","e","target","onBlur","onKeyPress","key","autoFocus","stopPropagation","App","chats","setChats","currentChatId","setCurrentChatId","messages","setMessages","question","setQuestion","loading","setLoading","showPdfModal","setShowPdfModal","pdfUrlToPreview","setPdfUrlToPreview","numPages","setNumPages","pageNumber","setPageNumber","isDarkMode","setIsDarkMode","showTyping","setShowTyping","typingTimeoutRef","messagesEndRef","fileInputRef","mainFileInputRef","uploadedFiles","setUploadedFiles","favoritedChats","setFavoritedChats","Set","attachedPDFs","setAttachedPDFs","userLanguage","setUserLanguage","setRenamingChatId","showSidebarUpload","setShowSidebarUpload","setIsSidebarOpen","saved","localStorage","getItem","JSON","parse","savedFiles","console","error","setItem","stringify","onDocumentLoadSuccess","_ref3","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","addToUploadedFiles","fileData","newFile","pdf_path","chat_name","filename","toISOString","chatId","chat_id","prev","exists","some","f","removeUploadedFile","filePath","filter","uploadFilesToChat","targetChatId","arguments","undefined","info","uploadPromises","formData","FormData","append","response","fetch","method","body","ok","errorData","json","Error","status","detail","statusText","result","results","Promise","all","fetchChats","action","success","message","fetchChatMessages","savedTheme","document","documentElement","classList","add","clearTimeout","data","Array","isArray","warn","pdf_paths","index","_data$pdf_names","pdf_names","split","pop","handleFileUpload","event","from","handleDragOver","preventDefault","handleDrop","dataTransfer","handleSendMessage","trim","headers","text","userMessage","role","content","prevMessages","setTimeout","sender","slice","handleDeleteChat","window","confirm","prevChats","handleDeleteAllChats","log","handlePdfPreview","pdfPath","pdfUrl","toggleDarkMode","toggle","toggleSidebar","handleKeyDown","ctrlKey","metaKey","addEventListener","removeEventListener","toggleFavorite","newFavorited","has","delete","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","theme","limit","transition","icon","_ref4","sort","a","b","aFavorited","bFavorited","aDate","created_at","bDate","click","ref","accept","multiple","place","onSubmit","placeholder","disabled","onLoadSuccess","renderTextLayer","renderAnnotationLayer","Math","max","min"],"sources":["C:/Users/LENOVO/Downloads/Inquiero/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { ToastContainer, toast, Slide } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Document, Page, pdfjs } from 'react-pdf';\nimport {\n  Plus,\n  Trash2,\n  FileText,\n  Send,\n  Moon,\n  Sun,\n  ChevronLeft,\n  ChevronRight,\n  X,\n  FileUp,\n  Clock,\n  MessageSquare,\n  Star,\n  Edit,\n  Menu,\n  Eye\n} from 'lucide-react';\nimport './styles/globals.css';\nimport { Tooltip } from 'react-tooltip';\nimport 'react-tooltip/dist/react-tooltip.css';\n\n// Configure react-pdf worker\npdfjs.GlobalWorkerOptions.workerSrc = '/pdf.worker.min.js';\n\nconst API_BASE_URL = 'http://localhost:8000'; // Assuming FastAPI runs on port 8000\n\nfunction getToastIcon(type) {\n  switch (type) {\n    case 'success':\n      return '‚úÖ';\n    case 'error':\n      return '‚ùå';\n    case 'info':\n      return '‚ÑπÔ∏è';\n    case 'warning':\n      return '‚ö†Ô∏è';\n    default:\n      return 'üîî';\n  }\n}\n\nfunction TypingBubble() {\n  return (\n    <div className=\"chat-bubble chat-bubble-ai typing-bubble\">\n      <div className=\"typing-dots\">\n        <span></span><span></span><span></span>\n      </div>\n    </div>\n  );\n}\n\nfunction PDFFileList({ \n  files, \n  onAddMore, \n  onPreview, \n  onRemove, \n  isSidebarOpen,\n  showAddButton = true,\n  onDragOver,\n  onDrop\n}) {\n  if (files.length === 0) {\n    return (\n      <div className=\"text-center py-8\">\n        <FileText size={40} className=\"mx-auto mb-4 text-gray-400\" />\n        <p className=\"text-gray-500 dark:text-gray-400 text-sm mb-4\">No PDF files uploaded yet</p>\n        {showAddButton && (\n          <div className=\"space-y-3\">\n            <button \n              onClick={onAddMore}\n              className=\"btn btn-secondary text-sm flex items-center gap-2 mx-auto\"\n            >\n              <FileUp size={16} /> Upload PDF\n            </button>\n            <div \n              className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 hover:border-blue-400 dark:hover:border-blue-500 transition-colors duration-200\"\n              onDragOver={onDragOver}\n              onDrop={onDrop}\n            >\n              <FileUp size={24} className=\"mx-auto mb-2 text-gray-400\" />\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                Or drag and drop PDF files here\n              </p>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n          <FileText size={20} className=\"text-accent-blue\" />\n          Uploaded Files ({files.length})\n        </h3>\n        {showAddButton && (\n          <button \n            onClick={onAddMore}\n            className=\"btn btn-secondary text-sm flex items-center gap-2\"\n          >\n            <FileUp size={16} /> Add More\n          </button>\n        )}\n      </div>\n      \n      <div className={`grid gap-3 ${isSidebarOpen ? 'md:grid-cols-1' : 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4'}`}>\n        {files.map((file, idx) => (\n          <div \n            key={file.path || idx} \n            className=\"group relative flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600 transition-all duration-200\"\n          >\n            <div className=\"flex items-center gap-3 min-w-0 flex-1\">\n              <FileText size={20} className=\"text-accent-blue dark:text-accent-purple flex-shrink-0\" />\n              <div className=\"min-w-0 flex-1\">\n                <span className=\"text-sm font-medium truncate block\">{file.name}</span>\n                {file.language && file.language !== 'en' && (\n                  <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                    {file.language.toUpperCase()}\n                  </span>\n                )}\n                {file.uploadedAt && (\n                  <span className=\"text-xs text-gray-400 dark:text-gray-500\">\n                    {new Date(file.uploadedAt).toLocaleDateString()}\n                  </span>\n                )}\n              </div>\n            </div>\n            \n            <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\n              <button \n                onClick={() => onPreview(file.path)}\n                className=\"btn-icon btn-icon-primary p-1.5\"\n                data-tooltip-id=\"preview-tooltip\"\n                data-tooltip-content=\"Preview PDF\"\n              >\n                <Eye size={14} />\n              </button>\n              {onRemove && (\n                <button \n                  onClick={() => onRemove(file.path)}\n                  className=\"btn-icon btn-icon-secondary p-1.5\"\n                  data-tooltip-id=\"remove-tooltip\"\n                  data-tooltip-content=\"Remove file\"\n                >\n                  <Trash2 size={14} />\n                </button>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction ChatItem({ \n  chat, \n  isSelected, \n  isFavorited, \n  onSelect, \n  onRename, \n  onFavorite, \n  onDelete, \n  renamingChatId, \n  newChatName, \n  setNewChatName \n}) {\n  const isRenaming = renamingChatId === chat.id;\n\n  return (\n    <div \n      className={`\n        group relative flex flex-col transition-all duration-200\n        ${isSelected \n          ? 'bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800' \n          : isFavorited\n            ? 'bg-amber-50/50 dark:bg-amber-900/10 border-amber-200 dark:border-amber-800/50 hover:bg-amber-50 dark:hover:bg-amber-900/20'\n            : 'bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50'\n        }\n        border rounded-xl shadow-sm hover:shadow-md\n        cursor-pointer select-none\n        ${isFavorited ? 'ring-1 ring-amber-200 dark:ring-amber-800/50' : ''}\n      `}\n    >\n      <div \n        className=\"flex items-center justify-between p-3\"\n        onClick={() => onSelect(chat.id)}\n      >\n        <div className=\"flex items-center gap-3 min-w-0 flex-1\">\n          <div className=\"flex-shrink-0 relative\">\n            {isFavorited && (\n              <div className=\"absolute -top-1 -right-1\">\n                <Star \n                  size={12} \n                  className=\"text-amber-400 fill-amber-400\" \n                />\n              </div>\n            )}\n            <FileText \n              size={18} \n              className={`\n                ${isSelected \n                  ? 'text-blue-600 dark:text-blue-400' \n                  : isFavorited\n                    ? 'text-amber-600 dark:text-amber-400'\n                    : 'text-gray-400 dark:text-gray-500'\n                }\n                transition-colors duration-200\n              `} \n            />\n          </div>\n          <div className=\"min-w-0 flex-1\">\n            {isRenaming ? (\n              <input\n                type=\"text\"\n                value={newChatName}\n                onChange={(e) => setNewChatName(e.target.value)}\n                onBlur={() => onRename(chat.id, newChatName)}\n                onKeyPress={(e) => {\n                  if (e.key === 'Enter') {\n                    onRename(chat.id, newChatName);\n                  }\n                }}\n                className={`\n                  w-full px-2 py-1 text-sm rounded-md \n                  ${isFavorited \n                    ? 'border-amber-200 dark:border-amber-800 focus:ring-amber-500' \n                    : 'border-blue-200 dark:border-blue-800 focus:ring-blue-500'\n                  }\n                  bg-white dark:bg-gray-800 focus:ring-2 focus:border-transparent\n                  transition-all duration-200\n                `}\n                autoFocus\n              />\n            ) : (\n              <p className={`\n                text-sm font-medium truncate\n                ${isFavorited \n                  ? 'text-amber-700 dark:text-amber-300' \n                  : 'text-gray-700 dark:text-gray-200'\n                }\n              `}>\n                {chat.name}\n              </p>\n            )}\n          </div>\n        </div>\n        \n        <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\n          <button\n            data-tooltip-id=\"rename-tooltip\"\n            data-tooltip-content=\"Rename chat\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onRename(chat.id, chat.name);\n            }}\n            className={`\n              p-1.5 rounded-lg transition-colors duration-200\n              ${isFavorited\n                ? 'hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-600 dark:text-amber-400'\n                : 'hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200'\n              }\n            `}\n          >\n            <Edit size={14} />\n          </button>\n          \n          <button\n            data-tooltip-id=\"favorite-tooltip\"\n            data-tooltip-content={isFavorited ? \"Remove from favorites\" : \"Add to favorites\"}\n            onClick={(e) => {\n              e.stopPropagation();\n              onFavorite(chat.id);\n            }}\n            className={`\n              p-1.5 rounded-lg transition-colors duration-200\n              ${isFavorited\n                ? 'hover:bg-amber-100 dark:hover:bg-amber-900/30'\n                : 'hover:bg-gray-100 dark:hover:bg-gray-700'\n              }\n            `}\n          >\n            <Star \n              size={14} \n              className={isFavorited \n                ? 'text-amber-400 fill-amber-400' \n                : 'text-gray-400 dark:text-gray-500 hover:text-amber-400 dark:hover:text-amber-400'\n              } \n            />\n          </button>\n          \n          <button\n            data-tooltip-id=\"delete-tooltip\"\n            data-tooltip-content=\"Delete chat\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onDelete(chat.id);\n            }}\n            className={`\n              p-1.5 rounded-lg transition-colors duration-200\n              ${isFavorited\n                ? 'hover:bg-red-50 dark:hover:bg-red-900/30 text-amber-600/70 hover:text-red-500 dark:text-amber-400/70 dark:hover:text-red-400'\n                : 'hover:bg-red-50 dark:hover:bg-red-900/30 text-gray-400 hover:text-red-500 dark:text-gray-500 dark:hover:text-red-400'\n              }\n            `}\n          >\n            <Trash2 size={14} />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction App() {\n  const [chats, setChats] = useState([]);\n  const [currentChatId, setCurrentChatId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [question, setQuestion] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [showPdfModal, setShowPdfModal] = useState(false);\n  const [pdfUrlToPreview, setPdfUrlToPreview] = useState(null);\n  const [numPages, setNumPages] = useState(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [isDarkMode, setIsDarkMode] = useState(false);\n  const [showTyping, setShowTyping] = useState(false);\n  const typingTimeoutRef = useRef(null);\n\n  const messagesEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const mainFileInputRef = useRef(null);\n\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  const [favoritedChats, setFavoritedChats] = useState(new Set());\n  const [attachedPDFs, setAttachedPDFs] = useState([]);\n  const [userLanguage, setUserLanguage] = useState('en');\n\n  // Add a new state for the chat being renamed\n  const [renamingChatId, setRenamingChatId] = useState(null);\n  const [newChatName, setNewChatName] = useState('');\n\n  // Only show the upload button in the sidebar after the first file is uploaded\n  const [showSidebarUpload, setShowSidebarUpload] = useState(true);\n\n  const [isSidebarOpen, setIsSidebarOpen] = useState(() => {\n    const saved = localStorage.getItem('sidebarOpen');\n    return saved !== null ? JSON.parse(saved) : true;\n  });\n\n  // Load uploaded files from localStorage on component mount\n  useEffect(() => {\n    const savedFiles = localStorage.getItem('uploadedFiles');\n    if (savedFiles) {\n      try {\n        setUploadedFiles(JSON.parse(savedFiles));\n      } catch (e) {\n        console.error('Error loading uploaded files:', e);\n        setUploadedFiles([]);\n      }\n    }\n  }, []);\n\n  // Save uploaded files to localStorage whenever they change\n  useEffect(() => {\n    localStorage.setItem('uploadedFiles', JSON.stringify(uploadedFiles));\n  }, [uploadedFiles]);\n\n  const onDocumentLoadSuccess = ({ numPages }) => {\n    setNumPages(numPages);\n    setPageNumber(1); // Reset to first page when new PDF loads\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  // Function to add a file to the uploaded files list\n  const addToUploadedFiles = (fileData) => {\n    const newFile = {\n      path: fileData.pdf_path,\n      name: fileData.chat_name || fileData.filename,\n      language: fileData.language || 'en',\n      uploadedAt: new Date().toISOString(),\n      chatId: fileData.chat_id\n    };\n    \n    setUploadedFiles(prev => {\n      // Check if file already exists (by path)\n      const exists = prev.some(f => f.path === newFile.path);\n      if (exists) {\n        return prev;\n      }\n      return [...prev, newFile];\n    });\n  };\n\n  // Function to remove a file from the uploaded files list\n  const removeUploadedFile = (filePath) => {\n    setUploadedFiles(prev => prev.filter(f => f.path !== filePath));\n    \n    // Also remove from attached PDFs if it's there\n    setAttachedPDFs(prev => prev.filter(f => f.path !== filePath));\n  };\n\n  // Function to upload files to a specific chat\n  const uploadFilesToChat = async (files, targetChatId = null) => {\n    if (files.length === 0) return;\n\n    setLoading(true);\n    toast.info(\"Uploading and processing PDFs...\");\n\n    try {\n      const uploadPromises = files.map(async (file) => {\n        const formData = new FormData();\n        formData.append('file', file);\n        \n        // Add chat_id to form data if we're appending to an existing chat\n        if (targetChatId) {\n          formData.append('chat_id', targetChatId);\n        }\n\n        const response = await fetch(`${API_BASE_URL}/upload-pdf/`, {\n          method: 'POST',\n          body: formData,\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`HTTP error! status: ${response.status} - ${errorData.detail || response.statusText}`);\n        }\n\n        const result = await response.json();\n        \n        // Add file to uploaded files list\n        addToUploadedFiles(result);\n        \n        return result;\n      });\n\n      const results = await Promise.all(uploadPromises);\n      \n      // If we're appending to an existing chat, update the attached PDFs\n      if (targetChatId && currentChatId === targetChatId) {\n        setAttachedPDFs(prev => [...prev, ...results.map(file => ({\n          path: file.pdf_path,\n          name: file.chat_name,\n          language: file.language\n        }))]);\n      }\n      \n      // Set the first chat as current if none is selected and we're not appending\n      if (!currentChatId && !targetChatId && results.length > 0) {\n        setCurrentChatId(results[0].chat_id);\n      }\n      \n      fetchChats();\n      const action = targetChatId ? 'appended to chat' : 'uploaded and processed';\n      toast.success(`${files.length} PDF${files.length > 1 ? 's' : ''} ${action} successfully! ‚úÖ`);\n      setShowSidebarUpload(true);\n    } catch (e) {\n      toast.error(`PDF upload failed: ${e.message} ‚ùå`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchChats();\n  }, []);\n\n  useEffect(() => {\n    if (currentChatId) {\n      fetchChatMessages(currentChatId);\n    } else {\n      setMessages([]);\n    }\n  }, [currentChatId]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  useEffect(() => {\n    // Check for saved theme preference\n    const savedTheme = localStorage.getItem('theme');\n    if (savedTheme === 'dark') {\n      setIsDarkMode(true);\n      document.documentElement.classList.add('dark');\n    }\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      if (typingTimeoutRef.current) clearTimeout(typingTimeoutRef.current);\n    };\n  }, []);\n\n  const fetchChats = async () => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/chats/`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data && Array.isArray(data.chats)) {\n        setChats(data.chats);\n      } else {\n        setChats([]);\n        console.warn('Received invalid chat data format:', data);\n      }\n    } catch (e) {\n      setChats([]); // Clear chats on error\n    }\n  };\n\n  const fetchChatMessages = async (chatId) => {\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/chats/${chatId}/`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data && Array.isArray(data.messages)) {\n        setMessages(data.messages);\n        // Load associated PDFs\n        if (data.pdf_paths) {\n          setAttachedPDFs(data.pdf_paths.map((path, index) => ({\n            path: path,\n            name: data.pdf_names?.[index] || path.split('/').pop(),\n            language: data.language || 'en'\n          })));\n        }\n      } else {\n        setMessages([]);\n        setAttachedPDFs([]);\n        console.warn('Received invalid chat message data format:', data);\n      }\n    } catch (e) {\n      setMessages([]); // Clear messages on error\n      setAttachedPDFs([]); // Clear PDFs on error\n      toast.error(`Failed to load chat: ${e.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (event) => {\n    const files = Array.from(event.target.files);\n    if (files.length === 0) return;\n\n    // If we have a current chat, append to it; otherwise create new chat\n    await uploadFilesToChat(files, currentChatId);\n  };\n\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    const files = Array.from(e.dataTransfer.files).filter(file => file.type === 'application/pdf');\n    if (files.length > 0) {\n      const event = { target: { files } };\n      handleFileUpload(event);\n    }\n  };\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    if (!question.trim() || !currentChatId) return;\n\n    // Detect user's language\n    try {\n      const response = await fetch(`${API_BASE_URL}/detect-language/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ text: question }),\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setUserLanguage(data.language);\n      }\n    } catch (e) {\n      console.error('Language detection failed:', e);\n    }\n\n    const userMessage = { role: 'user', content: question };\n    setMessages((prevMessages) => [...prevMessages, userMessage]);\n    setQuestion('');\n    setLoading(true);\n    setShowTyping(false);\n    if (typingTimeoutRef.current) clearTimeout(typingTimeoutRef.current);\n    typingTimeoutRef.current = setTimeout(() => setShowTyping(true), 300);\n\n    try {\n      const response = await fetch(`${API_BASE_URL}/chat/${currentChatId}/message/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ \n          text: userMessage.content,\n          sender: 'user',\n          language: userLanguage\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(`HTTP error! status: ${response.status} - ${errorData.detail || response.statusText}`);\n      }\n\n      const data = await response.json();\n      setMessages((prevMessages) => [...prevMessages, { role: 'assistant', content: data.response }]);\n      fetchChats();\n      toast.success(\"Answer generated! üí¨\");\n\n    } catch (e) {\n      setMessages((prevMessages) => prevMessages.slice(0, prevMessages.length - 1)); // Remove user message if failed\n      toast.error(`Failed to generate answer: ${e.message} ‚ö†Ô∏è`);\n    } finally {\n      setLoading(false);\n      setShowTyping(false); // Hide typing animation when response is complete\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n        typingTimeoutRef.current = null;\n      }\n    }\n  };\n\n  const handleDeleteChat = async (chatId) => {\n    if (window.confirm(\"Are you sure you want to delete this chat? This action cannot be undone.\")) {\n      setLoading(true);\n      try {\n        const response = await fetch(`${API_BASE_URL}/chats/${chatId}/`, {\n          method: 'DELETE',\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`HTTP error! status: ${response.status} - ${errorData.detail || response.statusText}`);\n        }\n\n        if (currentChatId === chatId) {\n          setCurrentChatId(null);\n          setMessages([]);\n          setAttachedPDFs([]);\n        }\n        setChats(prevChats => prevChats.filter(chat => chat.id !== chatId));\n        toast.success(\"Chat deleted successfully! üóëÔ∏è\");\n      } catch (e) {\n        toast.error(`Failed to delete chat: ${e.message} ‚ö†Ô∏è`);\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n\n  const handleDeleteAllChats = async () => {\n    if (window.confirm(\"Are you sure you want to delete ALL chats? This action cannot be undone.\")) {\n      setLoading(true);\n      try {\n        console.log(\"Sending delete all chats request...\");\n        const response = await fetch(`${API_BASE_URL}/chats/all/`, {\n          method: 'DELETE',\n        });\n\n        console.log(\"Delete all chats response status:\", response.status);\n        \n        if (!response.ok) {\n          const errorData = await response.json();\n          console.error(\"Delete all chats error:\", errorData);\n          throw new Error(`HTTP error! status: ${response.status} - ${errorData.detail || response.statusText}`);\n        }\n\n        const result = await response.json();\n        console.log(\"Delete all chats success:\", result);\n\n        setCurrentChatId(null);\n        setChats([]);\n        setMessages([]);\n        setAttachedPDFs([]);\n        toast.success(\"All chats deleted! üóëÔ∏è\");\n        \n        // Refresh the chat list to ensure UI is updated\n        await fetchChats();\n      } catch (e) {\n        console.error(\"Delete all chats failed:\", e);\n        toast.error(`Failed to delete all chats: ${e.message} ‚ö†Ô∏è`);\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n\n  const handlePdfPreview = (pdfPath) => {\n    if (!pdfPath) {\n      toast.error(\"PDF path is not available.\");\n      return;\n    }\n    const pdfUrl = `${API_BASE_URL}/pdfs/${pdfPath}`; // Ensure the URL is correctly constructed\n    setPdfUrlToPreview(pdfUrl);\n    setShowPdfModal(true);\n  };\n\n  const toggleDarkMode = () => {\n    setIsDarkMode(!isDarkMode);\n    document.documentElement.classList.toggle('dark');\n  };\n\n  const toggleSidebar = () => {\n    setIsSidebarOpen(!isSidebarOpen);\n    localStorage.setItem('sidebarOpen', JSON.stringify(!isSidebarOpen));\n  };\n\n  // Keyboard shortcut to toggle sidebar (Ctrl/Cmd + B)\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      if ((event.ctrlKey || event.metaKey) && event.key === 'b') {\n        event.preventDefault();\n        toggleSidebar();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isSidebarOpen]);\n\n  const toggleFavorite = (chatId) => {\n    setFavoritedChats(prev => {\n      const newFavorited = new Set(prev);\n      if (newFavorited.has(chatId)) {\n        newFavorited.delete(chatId);\n      } else {\n        newFavorited.add(chatId);\n      }\n      return newFavorited;\n    });\n  };\n\n  return (\n    <div className={`flex h-screen bg-background-light dark:bg-background-dark text-text-primary-light dark:text-text-primary-dark transition-colors duration-200 ${!isSidebarOpen ? 'sidebar-closed' : ''}`}>\n      <ToastContainer\n        position=\"bottom-right\"\n        autoClose={3000}\n        hideProgressBar={false}\n        newestOnTop\n        closeOnClick\n        rtl={false}\n        pauseOnFocusLoss\n        draggable\n        pauseOnHover\n        theme={isDarkMode ? \"dark\" : \"light\"}\n        limit={3}\n        transition={Slide}\n        icon={({ type }) => getToastIcon(type)}\n      />\n\n      {/* Sidebar */}\n      <aside className={`\n        sidebar w-80 p-6 flex flex-col shadow-lg z-40 \n        bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700\n        transition-all duration-300 ease-in-out\n        ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'}\n        fixed md:fixed md:top-0 md:left-0 md:h-full\n        ${isSidebarOpen ? 'left-0' : '-left-full md:left-0'}\n      `}>\n        <div className=\"flex justify-between items-center mb-8\">\n          <h3 className=\"text-3xl font-extrabold tracking-wide gradient-text\">Inquiero</h3>\n          <button\n            onClick={toggleSidebar}\n            className=\"btn-icon btn-icon-primary hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200\"\n            data-tooltip-id=\"sidebar-tooltip\"\n            data-tooltip-content={`${isSidebarOpen ? \"Close sidebar\" : \"Open sidebar\"} (Ctrl+B)`}\n          >\n            <Menu size={20} />\n          </button>\n        </div>\n        \n        <div className=\"space-y-3 mb-6\">\n          <button \n            className=\"btn btn-primary w-full flex items-center justify-center gap-2 hover:shadow-lg transition-all duration-200\"\n            onClick={() => {\n              setCurrentChatId(null);\n              setMessages([]);\n            }}\n            data-tooltip-id=\"new-chat-tooltip\"\n            data-tooltip-content=\"Start a new chat\"\n          >\n            <Plus size={20} /> New Chat\n          </button>\n          \n          <button \n            className=\"btn btn-secondary w-full flex items-center justify-center gap-2 hover:shadow-lg transition-all duration-200\"\n            onClick={handleDeleteAllChats}\n            data-tooltip-id=\"delete-all-tooltip\"\n            data-tooltip-content=\"Delete all chats\"\n          >\n            <Trash2 size={20} /> Delete All\n          </button>\n        </div>\n        \n        <div className=\"flex-1 overflow-y-auto pr-2 -mr-2 space-y-2\">\n          {chats.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <FileText size={40} className=\"mx-auto mb-4 text-gray-400\" />\n              <p className=\"text-gray-500 dark:text-gray-400 text-sm\">No chats yet. Upload a PDF to start!</p>\n            </div>\n          ) : (\n            [...chats]\n              .sort((a, b) => {\n                // First sort by favorite status\n                const aFavorited = favoritedChats.has(a.id);\n                const bFavorited = favoritedChats.has(b.id);\n                if (aFavorited && !bFavorited) return -1;\n                if (!aFavorited && bFavorited) return 1;\n                \n                // Then sort by creation date (newest first)\n                const aDate = new Date(a.created_at || 0);\n                const bDate = new Date(b.created_at || 0);\n                return bDate - aDate;\n              })\n              .map((chat) => (\n                <ChatItem\n                  key={chat.id}\n                  chat={chat}\n                  isSelected={currentChatId === chat.id}\n                  isFavorited={favoritedChats.has(chat.id)}\n                  onSelect={setCurrentChatId}\n                  onRename={(id, name) => {\n                    setRenamingChatId(id);\n                    setNewChatName(name);\n                  }}\n                  onFavorite={toggleFavorite}\n                  onDelete={handleDeleteChat}\n                  renamingChatId={renamingChatId}\n                  newChatName={newChatName}\n                  setNewChatName={setNewChatName}\n                />\n              ))\n          )}\n        </div>\n\n        {showSidebarUpload && (\n          <div className=\"mt-4\">\n            <button \n              className=\"file-upload-btn w-full flex items-center justify-center gap-2 hover:shadow-lg transition-all duration-200\"\n              onClick={() => {\n                if (fileInputRef.current) {\n                  fileInputRef.current.click();\n                }\n              }}\n              data-tooltip-id=\"upload-tooltip\"\n              data-tooltip-content=\"Upload PDF files\"\n            >\n              <FileUp size={20} /> Upload PDF\n            </button>\n            <input\n              type=\"file\"\n              ref={fileInputRef}\n              accept=\".pdf\"\n              multiple\n              onChange={handleFileUpload}\n              className=\"hidden\"\n            />\n          </div>\n        )}\n\n        {/* Tooltips */}\n        <Tooltip id=\"rename-tooltip\" place=\"top\" />\n        <Tooltip id=\"favorite-tooltip\" place=\"top\" />\n        <Tooltip id=\"delete-tooltip\" place=\"top\" />\n        <Tooltip id=\"sidebar-tooltip\" place=\"bottom\" />\n        <Tooltip id=\"new-chat-tooltip\" place=\"bottom\" />\n        <Tooltip id=\"delete-all-tooltip\" place=\"bottom\" />\n        <Tooltip id=\"upload-tooltip\" place=\"bottom\" />\n        <Tooltip id=\"theme-tooltip\" place=\"bottom\" />\n        <Tooltip id=\"preview-tooltip\" place=\"top\" />\n        <Tooltip id=\"remove-tooltip\" place=\"top\" />\n      </aside>\n\n      {/* Sidebar Overlay for mobile */}\n      {isSidebarOpen && (\n        <div \n          className=\"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden\"\n          onClick={toggleSidebar}\n        />\n      )}\n\n      {/* Main Chat Area */}\n      <main className={`\n        flex-1 flex flex-col transition-all duration-300 ease-in-out\n        ${isSidebarOpen ? 'md:ml-80' : 'ml-0'}\n        ${isSidebarOpen ? 'md:w-auto' : 'w-full'}\n        ${isSidebarOpen ? 'md:max-w-none' : 'max-w-full'}\n        ${isSidebarOpen ? 'md:relative' : 'md:relative'}\n      `}>\n        {/* Floating Sidebar Toggle Button - Only visible when sidebar is closed */}\n        {!isSidebarOpen && (\n          <div className=\"absolute top-4 left-4 z-50\">\n            <button\n              onClick={toggleSidebar}\n              className=\"btn-icon btn-icon-primary hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 shadow-lg\"\n              data-tooltip-id=\"sidebar-tooltip\"\n              data-tooltip-content=\"Open sidebar (Ctrl+B)\"\n            >\n              <Menu size={20} />\n            </button>\n          </div>\n        )}\n\n        {/* Dark Mode Toggle Button - Top Right */}\n        <div className=\"absolute top-4 right-4 z-50\">\n          <button\n            onClick={toggleDarkMode}\n            className=\"btn-icon btn-icon-primary hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 shadow-lg\"\n            data-tooltip-id=\"theme-tooltip\"\n            data-tooltip-content={isDarkMode ? \"Switch to light mode\" : \"Switch to dark mode\"}\n          >\n            {isDarkMode ? <Sun size={20} /> : <Moon size={20} />}\n          </button>\n        </div>\n\n        <div className={`flex-1 overflow-y-auto space-y-4 transition-all duration-300 ${isSidebarOpen ? 'md:max-w-none p-6' : 'max-w-full p-6 md:p-8 lg:p-12'}`}>\n          {currentChatId ? (\n            messages.length > 0 ? (\n              <div className={`space-y-4 transition-all duration-300 ${isSidebarOpen ? 'md:max-w-4xl md:mx-auto' : 'w-full'}`}>\n                {messages.map((message, index) => (\n                  <div\n                    key={index}\n                    className={`chat-bubble ${\n                      message.role === 'user' ? 'chat-bubble-user' : 'chat-bubble-ai'\n                    }`}\n                  >\n                    <div className=\"flex items-start\">\n                      {message.role === 'user' ? (\n                        <MessageSquare size={20} className=\"mr-2 text-accent-blue\" />\n                      ) : (\n                        <Clock size={20} className=\"mr-2 text-accent-purple\" />\n                      )}\n                      <div>{message.content}</div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"flex items-center justify-center h-full text-text-secondary\">\n                <p>Start by asking a question about your PDF!</p>\n              </div>\n            )\n          ) : (\n            <div className=\"space-y-8\">\n              {/* Welcome Section */}\n              <div className=\"text-center\">\n                <h2 className=\"text-2xl font-bold mb-4\">Welcome to Inquiero! üëã</h2>\n                <p className=\"text-text-secondary mb-8\">Upload PDFs to start asking questions</p>\n              </div>\n              \n              {/* PDF File List Section */}\n              <div className={`transition-all duration-300 ${isSidebarOpen ? 'md:max-w-4xl md:mx-auto' : 'w-full'}`}>\n                <PDFFileList\n                  files={uploadedFiles}\n                  onAddMore={() => {\n                    if (mainFileInputRef.current) {\n                      mainFileInputRef.current.click();\n                    }\n                  }}\n                  onPreview={handlePdfPreview}\n                  onRemove={removeUploadedFile}\n                  isSidebarOpen={isSidebarOpen}\n                  showAddButton={true}\n                  onDragOver={handleDragOver}\n                  onDrop={handleDrop}\n                />\n              </div>\n            </div>\n          )}\n          {showTyping && <TypingBubble />}\n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Hidden file input for main content area */}\n        <input\n          type=\"file\"\n          ref={mainFileInputRef}\n          accept=\".pdf\"\n          multiple\n          onChange={handleFileUpload}\n          className=\"hidden\"\n        />\n\n        <form onSubmit={handleSendMessage} className={`border-t border-gray-200 dark:border-gray-700 transition-all duration-300 ${isSidebarOpen ? 'md:max-w-none p-4' : 'max-w-full p-4 md:p-6 lg:p-8'}`}>\n          <div className={`flex space-x-4 transition-all duration-300 ${isSidebarOpen ? 'md:max-w-4xl md:mx-auto' : 'w-full'}`}>\n            <input\n              type=\"text\"\n              value={question}\n              onChange={(e) => setQuestion(e.target.value)}\n              placeholder=\"Ask a question about your PDF...\"\n              className=\"input-field flex-1\"\n              disabled={loading || !currentChatId}\n            />\n            <button\n              type=\"submit\"\n              disabled={loading || !question.trim() || !currentChatId}\n              className=\"btn btn-primary flex-shrink-0\"\n            >\n              {loading ? <Clock size={20} className=\"animate-spin\" /> : <Send size={20} />}\n            </button>\n          </div>\n        </form>\n\n        {currentChatId && attachedPDFs.length > 0 && (\n          <div className={`border-t border-gray-200 dark:border-gray-700 transition-all duration-300 ${isSidebarOpen ? 'md:max-w-none p-4' : 'max-w-full p-4 md:p-6 lg:p-8'}`}>\n            <div className={`transition-all duration-300 ${isSidebarOpen ? 'md:max-w-4xl md:mx-auto' : 'w-full'}`}>\n              <PDFFileList\n                files={attachedPDFs}\n                onAddMore={() => {\n                  if (mainFileInputRef.current) {\n                    mainFileInputRef.current.click();\n                  }\n                }}\n                onPreview={handlePdfPreview}\n                onRemove={null} // Don't allow removal from chat context\n                isSidebarOpen={isSidebarOpen}\n                showAddButton={true}\n                onDragOver={handleDragOver}\n                onDrop={handleDrop}\n              />\n            </div>\n          </div>\n        )}\n      </main>\n\n      {/* PDF Preview Modal */}\n      {showPdfModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl p-4 max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-xl font-bold\">PDF Preview</h3>\n              <button\n                onClick={() => setShowPdfModal(false)}\n                className=\"btn-icon btn-icon-secondary\"\n              >\n                <X size={24} />\n              </button>\n            </div>\n            <Document\n              file={pdfUrlToPreview}\n              onLoadSuccess={onDocumentLoadSuccess}\n              className=\"flex justify-center\"\n            >\n              <Page\n                pageNumber={pageNumber}\n                renderTextLayer={false}\n                renderAnnotationLayer={false}\n                className=\"shadow-soft\"\n              />\n            </Document>\n            <div className=\"flex justify-center mt-4 space-x-4\">\n              <button\n                onClick={() => setPageNumber(Math.max(1, pageNumber - 1))}\n                disabled={pageNumber <= 1}\n                className=\"btn btn-icon btn-icon-secondary\"\n              >\n                <ChevronLeft size={20} />\n              </button>\n              <span className=\"py-2\">\n                Page {pageNumber} of {numPages}\n              </span>\n              <button\n                onClick={() => setPageNumber(Math.min(numPages, pageNumber + 1))}\n                disabled={pageNumber >= numPages}\n                className=\"btn btn-icon btn-icon-secondary\"\n              >\n                <ChevronRight size={20} />\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}